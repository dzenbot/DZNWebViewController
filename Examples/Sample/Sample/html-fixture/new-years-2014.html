<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>
      Reader Submissions - New Year's 2014 : NSHipster
    </title>
    <meta name="description" content=
    "NSHipster is a journal of the overlooked bits in Objective-C and Cocoa. Updated weekly.">
    <meta name="author" content="Mattt Thompson">
    <meta name="revisit-after" content="3 days">
    <meta name="viewport" content="width=device-width">
    <link rel="license" href=
    "http://creativecommons.org/licenses/by-nc/3.0/">
    <link rel="alternate" hreflang="en-us" href=
    "http://nshipster.com">
    <link rel="alternate" hreflang="zh-Hans" href=
    "http://nshipster.cn">
    <link rel="alternate" hreflang="x-default" href=
    "http://nshipster.com">
    <link rel="alternate" type="application/rss+xml" title="RSS"
    href="http://nshipster.com/feed.xml">
    <link rel="stylesheet" href="/css/screen.css" type="text/css">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@NSHipster">
    <meta name="twitter:creator" content="@mattt">
    <meta name="twitter:title" content=
    "Reader Submissions -&lt;br/&gt; New Year's 2014">
    <meta name="twitter:description" content=
    "As we prepare to increment our NSDateComponents -year by 1, it's time once again for NSHipster end-of-the-year Reader Submissions!">
    <meta content="NSHipster" property="og:site_name">
    <meta content="Reader Submissions -&lt;br/&gt; New Year's 2014"
    property="og:title">
    <meta content="http://nshipster.com/new-years-2014/" property=
    "og:url">
    <meta content=
    "As we prepare to increment our NSDateComponents -year by 1, it's time once again for NSHipster end-of-the-year Reader Submissions!"
    property="og:description">
    <meta property="st:title" content=
    "Reader Submissions -&lt;br/&gt; New Year's 2014">
    <meta property="st:type" content="article">
    <script type="text/javascript">
var _sf_startpt=(new Date()).getTime()
    </script>
    <script onload="try{Typekit.load();}catch(e){}" src=
    "//use.typekit.net/agk0bgp.js" type="text/javascript">
</script>
  </head>
  <body>
    <div role="container">
      <header role="banner">
        <h1 id="logo">
          <a href="/"><acronym title="NeXTSTEP/Sun">NS</acronym>
          <strong>Hipster</strong> <img id="moustache" src=
          "//cdn.nshipster.com/images/moustache.svg" width="200"
          height="150" data-author=
          "http://thenounproject.com/bnhw"></a>
        </h1>
        <form>
          <input type="text" id="st-search-input" class=
          "st-search-input">
        </form>
      </header>
      <div id="main" role="main">
        <article>
          <header>
            <h1>
              <a href="/new-years-2014/">Reader Submissions -<br>
              New Year's 2014</a>
            </h1>
            <h2>
              Written by <a href="http://mattt.me/">Mattt
              Thompson</a> on <time pubdate=
              "2013-12-30 00:00:00 -0800">Dec 30<span>th</span>,
              2013</time>
            </h2>
          </header>
          <div class="content" data-swiftype-index="true">
            <p>
              As we prepare to increment our <code>NSDateComponents
              -year</code> by <code>1</code>, it's time once again
              for NSHipster end-of-the-year Reader Submissions!
              <a href="https://gist.github.com/mattt/4148342">Last
              year</a>, we got some <a href=
              "http://nshipster.com/reader-submissions-new-years-2013/">
              mind-blowing tips and tricks</a>. With the release of
              iOS 7 &amp; Mavericks, and a year's worth of new
              developments in the Objective-C ecosystem, there was
              a ton of new stuff to write about.
            </p>
            <p>
              Thanks to <a href=
              "https://github.com/acoomans">Arnaud Coomans</a>,
              <a href="https://github.com/0xced">C√©dric Luthi</a>,
              <a href="https://github.com/dbgrandi">David
              Grandinetti</a>, <a href=
              "https://github.com/ellneal">Ell Neal</a>, <a href=
              "https://github.com/rubymaverick">Eric Allam</a>,
              <a href="https://github.com/eskerber">Erik
              Kerber</a>, <a href="https://github.com/jkubicek">Jim
              Kubicek</a>, <a href=
              "https://github.com/nevyn">Joachim Bengtsson</a>,
              <a href="https://github.com/Anviking">Johannes
              Lund</a>, <a href="https://github.com/joshavant">Josh
              Avant</a>, <a href="https://github.com/jpm">Jo√£o
              Prado Maia</a>, <a href=
              "https://github.com/incanus">Justin R. Miller</a>,
              <a href="https://github.com/PycKamil">Kamil Pyƒá</a>,
              <a href="https://github.com/mteece">Matthew
              Teece</a>, <a href=
              "https://github.com/MaxGabriel">Maximilian
              Tagher</a>, <a href=
              "https://github.com/mindbrix">Nigel Timothy
              Barber</a>, <a href=
              "https://github.com/NSProgrammer">Nolan O'Brien</a>,
              <a href="https://github.com/pitiphong-p">Pitiphong
              Phongpattranont</a>, <a href=
              "https://gist.github.com/stevemoser">Steve Moser</a>,
              <a href="https://github.com/Thomvis">Thomas
              Visser</a>, <a href=
              "https://github.com/shpakovski">Vadim Shpakovski</a>,
              &amp; <a href="https://github.com/jurre">@jurre</a>
              for <a href=
              "https://gist.github.com/7414618">contributing their
              great tips</a>.
            </p>
            <hr>
            <h2>
              GCC Code Block Evaluation C Extension
            </h2>
            <p>
              Let's make this official: <strong>NSHipster's
              Objective-C trend of 2013 is code block evaluation
              assignment</strong>. Recommended by both <a href=
              "https://github.com/jkubicek">Jim Kubicek</a> and
              <a href="https://github.com/MaxGabriel">Maximilian
              Tagher</a> (citing <a href=
              "http://cocoa-dom.tumblr.com/post/56517731293/new-thing-i-do-in-code">
              this blog post</a> by <a href=
              "https://github.com/monkeydom">Dominik Wagner</a>),
              this trick does wonders to make code cleaner, safer,
              and more concise.
            </p>
            <p>
              Behind the magic is a GCC C extension, which causes a
              code block to return a value if enclosed within
              brackets and parentheses.
            </p>
            <p>
              Watch, as it cuts through this view controller code
              like butter!
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="n">self</span><span class=
"p">.</span><span class="n">searchBar</span> <span class=
"o">=</span> <span class="p">({</span>
    <span class="n">UISearchBar</span> <span class=
"o">*</span><span class="n">searchBar</span> <span class=
"o">=</span> <span class="p">[[</span><span class=
"n">UISearchBar</span> <span class="n">alloc</span><span class=
"p">]</span> <span class="n">initWithFrame</span><span class=
"o">:</span><span class="p">({</span>
        <span class="n">CGRect</span> <span class=
"n">frame</span> <span class="o">=</span> <span class=
"n">self</span><span class="p">.</span><span class=
"n">tableView</span><span class="p">.</span><span class=
"n">frame</span><span class="p">;</span>
        <span class="n">frame</span><span class=
"p">.</span><span class="n">size</span><span class=
"p">.</span><span class="n">height</span> <span class=
"o">=</span> <span class="mf">50.0f</span><span class="p">;</span>
        <span class="n">frame</span><span class="p">;</span>
    <span class="p">})];</span>
    <span class="n">searchBar</span><span class=
"p">.</span><span class="n">delegate</span> <span class=
"o">=</span> <span class="n">self</span><span class="p">;</span>
    <span class="n">searchBar</span><span class="p">;</span>
<span class="p">});</span>
</code>
</pre>
            </div>
            <p>
              This not only segregates configuration details into
              initialization, but the additional scope allows
              generic variable names like <code>frame</code>,
              <code>button</code>, and <code>view</code> to be
              reused in subsequent initializations. No more
              <code>loginButtonFrame = ... / signupButtonFrame =
              ...</code>!
            </p>
            <p>
              If code craftsmanship is important to you, strongly
              consider making this standard practice in your work.
              It may look a bit weird at first, but this will very
              likely become common convention by the end of 2014.
            </p>
            <h2>
              Default Values with GNU-style Ternary <code>?:</code>
            </h2>
            <p>
              The ternary operator, <code>?</code>, is shorthand
              for <code>if () {...} else {...}</code>. However,
              because of how difficult it can be to understand
              statements with ternary operators at a glance, they
              are generally dispreferred by veteran coders.
            </p>
            <p>
              Nonetheless, <a href=
              "https://github.com/MaxGabriel">Maximilian Tagher</a>
              offers a lesser-known (yet much-loved by those
              in-the-know) use of the ternary operator:
              <code>?:</code>, which acts as a convenient way to
              specify a fallback value to return if the left-hand
              side is <code>nil</code>.
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="n">NSLog</span><span class=
"p">(</span><span class="s">@"%@"</span><span class=
"p">,</span> <span class="s">@"a"</span> <span class=
"o">?:</span> <span class="s">@"b"</span><span class=
"p">);</span> <span class="c1">// @"a"</span>
<span class="n">NSLog</span><span class="p">(</span><span class=
"s">@"%@"</span><span class="p">,</span> <span class=
"nb">nil</span> <span class="o">?:</span> <span class=
"s">@"b"</span><span class="p">);</span> <span class=
"c1">// @"b"</span>
</code>
</pre>
            </div>
            <p>
              This is especially convenient for providing default
              behavior when a property may not be set:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="n">dispatch_async</span><span class=
"p">(</span><span class="n">self</span><span class=
"p">.</span><span class="n">completionQueue</span> <span class=
"o">?:</span> <span class=
"n">dispatch_get_main_queue</span><span class=
"p">(),</span> <span class="o">^</span><span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">});</span>
</code>
</pre>
            </div>
            <p>
              The main downside of this approach is that default
              Xcode project warning settings will raise a warning.
              You can get around this by wrapping the relevant code
              block in <code>#pragma</code> declarations, but the
              added LOC nullifies much of the brevity that this
              approach provides:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="cp">#pragma clang diagnostic push</span>
<span class="cp">#pragma clang diagnostic ignored "-Wgnu"</span>
<span class="n">self</span><span class="p">.</span><span class=
"n">name</span> <span class="o">=</span> <span class=
"n">name</span> <span class="o">?:</span> <span class=
"s">@"Unknown"</span><span class="p">;</span>
<span class="cp">#pragma clang diagnostic pop</span>
</code>
</pre>
            </div>
            <h2>
              <code>@import</code>
            </h2>
            <p>
              <a href="https://github.com/shpakovski">Vadim
              Shpakovski</a> reminds us of one of the more obscure
              additions to LLVM 5.0, the <code>@import</code>
              keyword. No more are the days of <code>Xcode ‚ñπ
              Project ‚ñπ TARGETS ‚ñπ General ‚ñπ Linked Frameworks and
              Libraries ‚ñπ +</code>. With <code>@import</code>, the
              Xcode will automatically link <code>MapKit</code>,
              <code>CoreData</code>, or any other referenced
              framework as necessary. Even <code>Prefix.pch</code>
              benefits, sporting a svelte new physique:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="p">@</span><span class=
"n">import</span> <span class="n">UIKit</span><span class=
"p">;</span>
<span class="p">@</span><span class="n">import</span> <span class=
"n">Foundation</span><span class="p">;</span>
<span class="p">@</span><span class="n">import</span> <span class=
"n">CoreGraphics</span><span class="p">;</span>
</code>
</pre>
            </div>
            <h2>
              Customizing MKMapView Tiles
            </h2>
            <p>
              <a href="https://github.com/incanus">Justin R.
              Miller</a>, of <a href=
              "https://www.mapbox.com">MapBox</a> fame, brings to
              our attention what is perhaps the most important
              feature in iOS 7 mapping: custom tile overlays:
            </p>
            <blockquote>
              <p>
                Relatively little-known feature of iOS 7: you can
                turn off Apple's own maps now with
                <code>MKTileOverlay</code>,
                <code>MKTileOverlayRenderer</code>, and
                <code>canReplaceMapContent</code>, unlike you could
                before with Apple or (pre-iOS 6) Google. And check
                out <a href=
                "http://github.com/mapbox/mbxmapkit">MBXMapKit</a>
                if you'd like to do it in one line of code.
              </p>
            </blockquote>
            <h2>
              Thoughtbot's Blog Post on MapKit Performance
            </h2>
            <p>
              Speaking of iOS maps, <a href=
              "https://github.com/jpm">Jo√£o Prado Maia</a> cites an
              amazing blog post by <a href=
              "http://thoughtbot.com">thoughtbot</a>, <a href=
              "http://robots.thoughtbot.com/how-to-handle-large-amounts-of-data-on-maps">
              "How To Efficiently Display Large Amounts of Data on
              iOS Maps"</a> by <a href=
              "https://twitter.com/theocalmes">Theodore Calmes</a>.
              Consider it a must-read if you plan to do any
              significant iCartography in 2014.
            </p>
            <h2>
              NSAttributedString + HTML in iOS 7
            </h2>
            <p>
              Shifting gears a little bit, <a href=
              "https://github.com/rubymaverick">Eric Allam</a>
              remarks that <code>NSAttributedString</code> can do
              HTML now in iOS 7 with the new <a href=
              "https://developer.apple.com/library/ios/documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/uid/TP40011688">
              <code>NSHTMLTextDocumentType</code></a> document type
              attribute. Combine with <a href=
              "https://github.com/mdiep/MMMarkdown">MMMarkdown</a>
              for ridiculously easy <a href=
              "http://initwithfunk.com/blog/2013/09/29/easy-markdown-rendering-with-nsattributedstring-on-ios-7/">
              Markdown rendering in a <code>UITextView</code></a>.
            </p>
            <hr>
            <h2>
              Launch Arguments &amp; User Defaults
            </h2>
            <p>
              Offering another tip, <a href=
              "https://github.com/shpakovski">Vadim Shpakovski</a>
              calls our attention to the relationship between
              launch arguments and <code>NSUserDefaults</code>:
            </p>
            <p>
              The command line argument <code>-TestFeatureEnabled
              YES</code> can be checked in code with
              <code>[[NSUserDefaults standardUserDefaults]
              boolForKey:@"TestFeatureEnabled"]</code>. This is
              useful for debugging development builds.
            </p>
            <hr>
            <h2>
              Woes of a Missing <code>UIViewAnimationCurve</code>
              Value
            </h2>
            <p>
              <a href="https://github.com/Thomvis">Thomas
              Visser</a> bemoans his pick for least awesome
              Objective-C development in 2013:
            </p>
            <blockquote>
              <p>
                In iOS7, the animation of the keyboard show/hide
                changed. Its duration and, most notably, its curve
                is different from previous iOS versions. As before,
                if you want to animate something with the keyboard,
                you can listen to
                <code>UIKeyboardWillShowNotification</code>/<code>UIKeyboardWillHideNotification</code>
                and use the values from the <code>userInfo</code>
                dictionary to coordinate your animations with the
                keyboard. The <code>userInfo</code> dictionary
                contains the keyboard's begin frame, end frame,
                animation curve and animation duration.
              </p>
              <p>
                However, in iOS 7, the animation curve is an
                undefined value, meaning that it is not one of the
                4 defined values of
                <code>UIViewAnimationCurve</code>. Instead, its
                value is <code>7</code>. This is a problem if you
                want to use the same curve in your own animation,
                because such a curve is not defined. The
                work-around, <a href=
                "https://devforums.apple.com/message/878410#878410">
                as discussed on the Apple forums</a>, is to
                manually translate the
                <code>UIViewAnimationCurve</code> to a
                <code>UIViewAnimationOptions</code> value. From the
                definition of <code>UIViewAnimationOptions</code>,
                we learn that this translation is done by shifting
                the curve value 16 times to the left: <code>option
                = curve &lt;&lt; 16</code>. This works great, but
                shouldn't be necessary. I hope Apple will add this
                mysterious 5th curve to the definitions in a future
                iOS update.
              </p>
            </blockquote>
            <h2>
              Injecting Analytics on Outgoing Links
            </h2>
            <p>
              <a href="https://github.com/dbgrandi">David
              Grandinetti</a> has a tip for apps that want to track
              outgoing links from within an app: override
              <code>AppDelegate -openURL:</code>:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="k">-</span><span class=
"p">(</span><span class="kt">BOOL</span><span class=
"p">)</span><span class="nf">openURL:</span><span class=
"p">(</span><span class="n">NSURL</span> <span class=
"o">*</span><span class="p">)</span><span class=
"nv">url</span><span class="p">{</span>
    <span class="k">if</span> <span class=
"p">([[</span><span class="n">url</span> <span class=
"n">scheme</span><span class="p">]</span> <span class=
"n">hasPrefix</span><span class="o">:</span><span class=
"s">@"http"</span><span class="p">])</span> <span class=
"p">{</span>
        <span class="p">[[</span><span class=
"n">GAI</span> <span class="n">sharedInstance</span><span class=
"p">].</span><span class="n">defaultTracker</span> <span class=
"n">sendView</span><span class="o">:</span><span class=
"p">[</span><span class="n">url</span> <span class=
"n">absoluteString</span><span class="p">]];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class=
"p">[</span><span class="n">super</span> <span class=
"n">openURL</span><span class="o">:</span><span class=
"n">url</span><span class="p">];</span>
<span class="p">}</span>
</code>
</pre>
            </div>
            <p>
              In this example, this information is being sent to
              Google Analytics, but one could easily adapt this
              approach for any analytics provider.
            </p>
            <h2>
              Reviving the Look-and-Feel of iOS 6 in Your App with
              One Weird Trick (UI Designers <em>hate</em> it!)
            </h2>
            <p>
              Still resisting the aesthetics of this year's iOS
              makeover? <a href="https://github.com/PycKamil">Kamil
              Pyƒá</a> shows us how to act as if iOS 7 never
              happened:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="p">[[</span><span class=
"n">NSUserDefaults</span> <span class=
"n">standardUserDefaults</span><span class=
"p">]</span> <span class="n">setObject</span><span class=
"o">:</span><span class="p">@</span><span class=
"nb">YES</span> <span class="n">forKey</span><span class=
"o">:</span><span class="s">@"UIUseLegacyUI"</span><span class=
"p">]</span>
</code>
</pre>
            </div>
            <blockquote>
              <p>
                And, of course, following up from a previous tip,
                since <code>NSUserDefaults</code> is tied to launch
                arguments, this can also be specified on launch.
                Keep this tucked in the back of your mind‚Äîthis
                could make for a simple yet effective April Fool's
                joke.
              </p>
            </blockquote>
            <hr>
            <h2>
              Detecting Category Method Collisions
            </h2>
            <p>
              Categories are great, but suffer from that same
              original sin of Objective-C: lack of name-spacing.
              Duplicate method declarations in categories interact
              in undefined ways, and may lead to difficult-to-debug
              behavior.
            </p>
            <p>
              Fortunately, <a href=
              "https://github.com/0xced">C√©dric Luthi</a> shows us
              how to tell if any category methods are getting up in
              one another's business:
            </p>
            <blockquote>
              <p>
                Set the <code>OBJC_PRINT_REPLACED_METHODS</code>
                environment variable to <code>YES</code> in order
                to automatically log all methods that are smashed
                by categories.
              </p>
            </blockquote>
            <hr>
            <h2>
              A .plist of Emoji, Grouped by Category
            </h2>
            <p>
              In an encore submission, C√©dric brings us a <a href=
              "https://gist.github.com/mattt/8185075">.plist file
              of Emoji grouped by category</a> (mirrored from
              CloudApp to Gist in order to be more searchable). üòÑüëç
            </p>
            <hr>
            <h2>
              Quickly Determining the Type of Image Data
            </h2>
            <p>
              Here's a simple function from <a href=
              "https://github.com/NSProgrammer">Nolan O'Brien</a>
              that can be used to determine the type of image data
              based on the first couple bytes of the header:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="k">static</span> <span class=
"kr">inline</span> <span class=
"n">NSPUIImageType</span> <span class=
"nf">NSPUIImageTypeFromData</span><span class=
"p">(</span><span class="n">NSData</span> <span class=
"o">*</span><span class="n">imageData</span><span class=
"p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class=
"n">imageData</span><span class="p">.</span><span class=
"n">length</span> <span class="o">&gt;</span> <span class=
"mi">4</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">const</span> <span class=
"kt">unsigned</span> <span class="kt">char</span> <span class=
"o">*</span> <span class="n">bytes</span> <span class=
"o">=</span> <span class="p">[</span><span class=
"n">imageData</span> <span class="n">bytes</span><span class=
"p">];</span>

        <span class="k">if</span> <span class=
"p">(</span><span class="n">bytes</span><span class=
"p">[</span><span class="mi">0</span><span class=
"p">]</span> <span class="o">==</span> <span class=
"mh">0xff</span> <span class="o">&amp;&amp;</span>
            <span class="n">bytes</span><span class=
"p">[</span><span class="mi">1</span><span class=
"p">]</span> <span class="o">==</span> <span class=
"mh">0xd8</span> <span class="o">&amp;&amp;</span>
            <span class="n">bytes</span><span class=
"p">[</span><span class="mi">2</span><span class=
"p">]</span> <span class="o">==</span> <span class=
"mh">0xff</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class=
"n">NSPUIImageType_JPEG</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class=
"p">(</span><span class="n">bytes</span><span class=
"p">[</span><span class="mi">0</span><span class=
"p">]</span> <span class="o">==</span> <span class=
"mh">0x89</span> <span class="o">&amp;&amp;</span>
            <span class="n">bytes</span><span class=
"p">[</span><span class="mi">1</span><span class=
"p">]</span> <span class="o">==</span> <span class=
"mh">0x50</span> <span class="o">&amp;&amp;</span>
            <span class="n">bytes</span><span class=
"p">[</span><span class="mi">2</span><span class=
"p">]</span> <span class="o">==</span> <span class=
"mh">0x4e</span> <span class="o">&amp;&amp;</span>
            <span class="n">bytes</span><span class=
"p">[</span><span class="mi">3</span><span class=
"p">]</span> <span class="o">==</span> <span class=
"mh">0x47</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class=
"n">NSPUIImageType_PNG</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class=
"n">NSPUIImageType_Unknown</span><span class="p">;</span>
<span class="p">}</span>
</code>
</pre>
            </div>
            <hr>
            <h2>
              Print KVO Context
            </h2>
            <p>
              Once again, showing off his unmatched knowledge of
              Objective-C internals, C√©dric shares this extremely
              useful tip for debugging <a href=
              "http://nshipster.com/key-value-observing/">Key-Value
              Observing</a>.
            </p>
            <blockquote>
              <p>
                Print which <a href=
                "https://gist.github.com/ddribin/5158614#comment-798104">
                context</a> is passed to
                <code>observeValueForKeyPath:ofObject:change:context:</code>
                in lldb.
              </p>
              <p>
                Say you have declared a context like this:
              </p>
            </blockquote>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="k">static</span> <span class=
"k">const</span> <span class="kt">void</span> <span class=
"o">*</span><span class="n">MyFooContext</span> <span class=
"o">=</span> <span class="o">&amp;</span><span class=
"n">MyFooContext</span><span class="p">;</span>
</code>
</pre>
            </div>
            <blockquote>
              <p>
                ...and you want to to know what context it is when
                you are inside
              </p>
            </blockquote>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="k">-</span> <span class=
"p">(</span><span class="kt">void</span><span class=
"p">)</span><span class=
"nf">observeValueForKeyPath:</span><span class=
"p">(</span><span class="n">NSString</span> <span class=
"o">*</span><span class="p">)</span><span class="nv">keyPath</span>
                      <span class="nl">ofObject:</span><span class=
"p">(</span><span class="kt">id</span><span class=
"p">)</span><span class="nv">object</span>
                        <span class="nl">change:</span><span class=
"p">(</span><span class="n">NSDictionary</span> <span class=
"o">*</span><span class="p">)</span><span class="nv">change</span>
                       <span class="nl">context:</span><span class=
"p">(</span><span class="kt">void</span> <span class=
"o">*</span><span class="p">)</span><span class="nv">context</span>
</code>
</pre>
            </div>
            <blockquote>
              <p>
                You can do this:
              </p>
            </blockquote>
            <div class="highlight">
              <pre>
<code class="text language-text" data-lang=
"text">(lldb) image lookup -a `context`
      Address: MyApp[0x00026258] (MyApp.__DATA.__data + 4)
      Summary: MyFooContext
</code>
</pre>
            </div>
            <hr>
            <h2>
              Creating a KeyPath from Selectors
            </h2>
            <p>
              On the subject of Key-Value Coding, <a href=
              "https://github.com/pitiphong-p">Pitiphong
              Phongpattranont</a> offers this useful function that
              builds a keypath from a variable list of selectors:
            </p>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="kr">inline</span> <span class=
"n">NSString</span> <span class="o">*</span> <span class=
"nf">PTPKeyPathForSelectors</span><span class=
"p">(</span><span class="kt">SEL</span> <span class=
"n">selector</span><span class="p">,</span> <span class=
"p">...)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class=
"o">!</span><span class="n">selector</span><span class=
"p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class=
"nb">nil</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">NSMutableArray</span> <span class=
"o">*</span><span class="n">selectors</span> <span class=
"o">=</span> <span class="p">[</span><span class=
"n">NSMutableArray</span> <span class="n">array</span><span class=
"p">];</span>
  <span class="kt">va_list</span> <span class=
"n">args</span><span class="p">;</span>
  <span class="n">va_start</span><span class=
"p">(</span><span class="n">args</span><span class=
"p">,</span> <span class="n">selector</span><span class=
"p">);</span>
  <span class="kt">SEL</span> <span class=
"n">arg</span> <span class="o">=</span> <span class=
"n">selector</span><span class="p">;</span>
  <span class="k">do</span> <span class="p">{</span>
    <span class="p">[</span><span class=
"n">selectors</span> <span class="n">addObject</span><span class=
"o">:</span><span class="n">NSStringFromSelector</span><span class=
"p">(</span><span class="n">arg</span><span class="p">)];</span>
  <span class="p">}</span> <span class="k">while</span><span class=
"p">((</span><span class="n">arg</span> <span class=
"o">=</span> <span class="n">va_arg</span><span class=
"p">(</span><span class="n">args</span><span class=
"p">,</span> <span class="kt">SEL</span><span class="p">)));</span>
  <span class="n">va_end</span><span class="p">(</span><span class=
"n">args</span><span class="p">);</span>

  <span class="k">return</span> <span class=
"p">[</span><span class="n">selectors</span> <span class=
"n">componentsJoinedByString</span><span class=
"o">:</span><span class="s">@"."</span><span class="p">];</span>
<span class="p">}</span>
</code>
</pre>
            </div>
            <div class="highlight">
              <pre>
<code class="objective-c language-objective-c" data-lang=
"objective-c"><span class="n">NSString</span> <span class=
"o">*</span><span class="n">keyPath</span> <span class=
"o">=</span> <span class=
"n">PTPKeyPathForSelectors</span><span class=
"p">(</span><span class="k">@selector</span><span class=
"p">(</span><span class="n">data</span><span class=
"p">),</span> <span class="k">@selector</span><span class=
"p">(</span><span class="n">name</span><span class=
"p">),</span> <span class="nb">nil</span><span class="p">);</span>
<span class="c1">// =&gt; @"data.name"</span>
</code>
</pre>
            </div>
            <h2>
              Nomad CLI Utilities
            </h2>
            <p>
              And finally, <a href=
              "https://github.com/mteece">Matthew Teece</a> gives a
              shout-out to <a href=
              "http://nomad-cli.com">Nomad</a>, a world-class
              collection of command-line utilities‚Äîspecifically,
              <a href=
              "https://github.com/nomad/houston">Houston</a>, which
              can send and manage push notifications from the
              command line, or within your Ruby application.
            </p>
            <div class="highlight">
              <pre>
<code class="text language-text" data-lang=
"text">    $ apn push "&lt;token&gt;" -c /path/to/cert.pem -m "Hello!"
</code>
</pre>
            </div>
            <hr>
            <p>
              Thus concludes this year's reader submissions. Thanks
              again to everyone for your submissions!
            </p>
            <p>
              And thanks to you, dear reader, for sticking with
              NSHipster for another 52 weeks. Between the <a href=
              "http://asciiwwdc.com/2013/sessions/228?q=NSHipster">WWDC
              session</a> and <a href=
              "https://gumroad.com/l/nshipster">the book</a>, 2013
              has been a bellwether year for NSHipster. Thank you
              for your support and enthusiasm for the site‚Äîit
              really does mean the world to me.
            </p>
            <p>
              We have a ton of great stuff planned for 2014, so
              keep your fixies primed and your artisanal espresso
              hot for another season of great iOS and Mac OS X
              knowledge.
            </p>
          </div>
          <aside>
            <a href="https://twitter.com/share" class=
            "twitter-share-button" data-url=
            "http://nshipster.com/new-years-2014/" data-via=
            "NSHipster" data-size="large">Tweet</a> <script type=
            "text/javascript">
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
            </script>
          </aside>
          <footer id="book" class="promotion">
            <a href="https://gum.co/cfhipsterref"></a>
            <div id="cfhipsterref-cover"></div>
            <div>
              <hgroup>
                <h1>
                  <a href=
                  "https://gum.co/cfhipsterref">CFHipsterRef:
                  Low-Level Programming on<br>
                  iOS &amp; Mac OS X</a>
                </h1>
                <h2>
                  Available May 27th, 2014
                </h2>
              </hgroup>
              <p>
                Perfect for intermediate and expert developers
                wanting to take a deeper dive into advanced topics,
                <em>CFHipsterRef: Low-Level Programming on iOS
                &amp; Mac OS X</em> covers the core technologies
                powering Cocoa, Objective-C, and the operating
                system itself, including Core Bluetooth,
                Accelerate, and the Objective-C runtime.
              </p><button onclick=
              "javascript:window.location.href='https://gum.co/cfhipsterref'">Pre-Order
              Now</button>
            </div>
          </footer>
        </article>
      </div>
      <footer role="contentinfo">
        <section class="credits colophon">
          <p>
            Created by <a href="http://mattt.me">Mattt
            Thompson</a>, and released under a <a href=
            "http://creativecommons.org/licenses/by-nc/3.0/" rel=
            "license">Creative Commons BY-NC License</a>. <a href=
            "https://plus.google.com/106751358503565042647?rel=author"
            style="display: none;"></a>
          </p>
          <p>
            Articles also available in <a href=
            "http://nshipster.cn" hreflang="zh-Hans">‰∏≠Êñá</a>.
          </p>
        </section>
        <aside class="links">
          <a href="https://github.com/NSHipster/articles/issues"
          class="icon-github" title="Pull Requests Welcome"
          aria-hidden="true"></a> <a href="/feed.xml" class=
          "icon-feed" title="RSS" aria-hidden="true"></a>
        </aside>
        <section class="archive" role="navigation">
          <div>
            <h2>
              Foundation
            </h2>
            <ul>
              <li>
                <a href="/nsurl/">NSURL /<br>
                NSURLComponents</a>
              </li>
              <li>
                <a href=
                "/nstemporarydirectory/">NSTemporaryDirectory /<br>
                NSItemReplacementDirectory /<br>
                mktemp(3)</a>
              </li>
              <li>
                <a href="/nsrange/">NSRange</a>
              </li>
              <li>
                <a href=
                "/nsnotification-and-nsnotificationcenter/">NSNotification
                &amp;<br>
                NSNotificationCenter</a>
              </li>
              <li>
                <a href="/nsfilemanager/">NSFileManager</a>
              </li>
              <li>
                <a href="/nsformatter/">NSFormatter</a>
              </li>
              <li>
                <a href="/nserror/">NSError</a>
              </li>
              <li>
                <a href="/key-value-observing/">Key-Value
                Observing</a>
              </li>
              <li>
                <a href="/nshashtable-and-nsmaptable/">NSHashTable
                &amp;<br>
                NSMapTable</a>
              </li>
              <li>
                <a href="/nspredicate/">NSPredicate</a>
              </li>
              <li>
                <a href="/nsexpression/">NSExpression</a>
              </li>
              <li>
                <a href="/enumerators/">NSFastEnumeration /<br>
                NSEnumerator /<br>
                -enumerateObjectsUsingBlock:</a>
              </li>
              <li>
                <a href="/uuid-udid-unique-identifier/">NSUUID
                /<br>
                CFUUIDRef /<br>
                UIDevice -uniqueIdentifier /<br>
                -identifierForVendor</a>
              </li>
              <li>
                <a href="/nsdatadetector/">NSDataDetector</a>
              </li>
              <li>
                <a href="/nscoding/">NSCoding / NSKeyedArchiver</a>
              </li>
              <li>
                <a href="/nssecurecoding/">NSSecureCoding</a>
              </li>
              <li>
                <a href=
                "/nsassertionhandler/">NSAssertionHandler</a>
              </li>
              <li>
                <a href="/nsurlcache/">NSURLCache</a>
              </li>
              <li>
                <a href="/nsvalue/">NSValue</a>
              </li>
              <li>
                <a href="/nslocalizedstring/">NSLocalizedString</a>
              </li>
              <li>
                <a href="/instancetype/">instancetype</a>
              </li>
              <li>
                <a href="/kvc-collection-operators/">KVC Collection
                Operators</a>
              </li>
              <li>
                <a href="/nsorderedset/">NSOrderedSet</a>
              </li>
              <li>
                <a href="/ns_enum-ns_options/">NS_ENUM &amp;
                NS_OPTIONS</a>
              </li>
              <li>
                <a href=
                "/nsvaluetransformer/">NSValueTransformer</a>
              </li>
              <li>
                <a href="/nsurlprotocol/">NSURLProtocol</a>
              </li>
              <li>
                <a href=
                "/nslinguistictagger/">NSLinguisticTagger</a>
              </li>
              <li>
                <a href="/nscharacterset/">NSCharacterSet</a>
              </li>
              <li>
                <a href="/nslocale/">NSLocale</a>
              </li>
              <li>
                <a href="/nsoperation/">NSOperation</a>
              </li>
              <li>
                <a href=
                "/nsincrementalstore/">NSIncrementalStore</a>
              </li>
              <li>
                <a href="/nsdatecomponents/">NSDateComponents</a>
              </li>
              <li>
                <a href="/nssortdescriptor/">NSSortDescriptor</a>
              </li>
              <li>
                <a href="/nscache/">NSCache</a>
              </li>
              <li>
                <a href="/nsindexset/">NSIndexSet</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              CoreFoundation
            </h2>
            <ul>
              <li>
                <a href="/cfbag/">CFBag</a>
              </li>
              <li>
                <a href="/cfstringtransform/">CFStringTransform</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              CoreGraphics
            </h2>
            <ul>
              <li>
                <a href="/cggeometry/">CGGeometry</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              UIKit
            </h2>
            <ul>
              <li>
                <a href=
                "/launch-options/">UIApplicationDelegate<br>
                launchOptions</a>
              </li>
              <li>
                <a href="/uimenucontroller/">UIMenuController</a>
              </li>
              <li>
                <a href="/uiappearance/">UIAppearance</a>
              </li>
              <li>
                <a href=
                "/uilocalizedindexedcollation/">UILocalizedIndexedCollation</a>
              </li>
              <li>
                <a href="/uicollectionview/">UICollectionView</a>
              </li>
              <li>
                <a href="/uiaccessibility/">UIAccessibility</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              Objective-C
            </h2>
            <ul>
              <li>
                <a href="/namespacing/">Namespacing</a>
              </li>
              <li>
                <a href="/extended-file-attributes/">Extended File
                Attributes</a>
              </li>
              <li>
                <a href="/equality/">Equality</a>
              </li>
              <li>
                <a href="/random/">rand(3) / random(3) /
                arc4random(3) / et al.</a>
              </li>
              <li>
                <a href="/object-subscripting/">Object
                Subscripting</a>
              </li>
              <li>
                <a href="/bool/">BOOL / bool / Boolean /
                NSCFBoolean</a>
              </li>
              <li>
                <a href="/c-storage-classes/">C Storage Classes</a>
              </li>
              <li>
                <a href="/type-encodings/">Type Encodings</a>
              </li>
              <li>
                <a href="/__attribute__/">__attribute__</a>
              </li>
              <li>
                <a href="/nil/">nil / Nil / NULL / NSNull</a>
              </li>
              <li>
                <a href="/at-compiler-directives/">@</a>
              </li>
              <li>
                <a href="/pragma/">#pragma</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              Open Source
            </h2>
            <ul>
              <li>
                <a href="/xctool/">xctool</a>
              </li>
              <li>
                <a href="/afnetworking-2/">AFNetworking 2.0</a>
              </li>
              <li>
                <a href="/core-data-libraries-and-utilities/">Core
                Data Libraries &amp; Utilities</a>
              </li>
              <li>
                <a href="/gpuimage/">GPUImage</a>
              </li>
              <li>
                <a href="/reactivecocoa/">ReactiveCocoa</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              Testing
            </h2>
            <ul>
              <li>
                <a href="/unit-testing/">Unit Testing</a>
              </li>
            </ul>
          </div>
          <div>
            <h2>
              Miscellanea
            </h2>
            <ul>
              <li>
                <a href=
                "/avspeechsynthesizer/">AVSpeechSynthesizer</a>
              </li>
              <li>
                <a href="/empathy/">Empathy</a>
              </li>
              <li>
                <a href=
                "/dictionary-services/">UIReferenceLibraryViewController
                /<br>
                DCSDictionaryRef/<br>
                /usr/share/dict/words</a>
              </li>
              <li>
                <a href="/method-swizzling/">Method Swizzling</a>
              </li>
              <li>
                <a href="/associated-objects/">Associated
                Objects</a>
              </li>
              <li>
                <a href=
                "/mktileoverlay-mkmapsnapshotter-mkdirections/">MKTileOverlay,<br>
                MKMapSnapshotter &amp;<br>
                MKDirections</a>
              </li>
              <li>
                <a href="/stewardship/">Stewardship</a>
              </li>
              <li>
                <a href="/colophon/">Colophon</a>
              </li>
              <li>
                <a href="/new-years-2014/">Reader Submissions -<br>
                New Year's 2014</a>
              </li>
              <li>
                <a href="/multipeer-connectivity/">Multipeer
                Connectivity</a>
              </li>
              <li>
                <a href="/nshipster-quiz-4/">NSHipster Quiz #4</a>
              </li>
              <li>
                <a href=
                "/launch-arguments-and-environment-variables/">Launch
                Arguments &amp;<br>
                Environment Variables</a>
              </li>
              <li>
                <a href="/xcode-key-bindings-and-gestures/">Xcode
                Key Bindings &amp; Gestures</a>
              </li>
              <li>
                <a href="/ios7/">iOS 7</a>
              </li>
              <li>
                <a href="/network-link-conditioner/">Network Link
                Conditioner</a>
              </li>
              <li>
                <a href="/xcode-snippets/">Xcode Snippets</a>
              </li>
              <li>
                <a href="/documentation/">Documentation</a>
              </li>
              <li>
                <a href="/nshipster-quiz-3/">NSHipster Quiz #3</a>
              </li>
              <li>
                <a href="/nshipster-quiz-2/">NSHipster Quiz #2</a>
              </li>
              <li>
                <a href="/mklocalsearch/">MKLocalSearch</a>
              </li>
              <li>
                <a href="/nshipster-quiz-1/">NSHipster Quiz #1</a>
              </li>
              <li>
                <a href="/icloud/">iCloud</a>
              </li>
              <li>
                <a href="/search-kit/">Search Kit</a>
              </li>
              <li>
                <a href="/backrow/">Back Row</a>
              </li>
              <li>
                <a href=
                "/reader-submissions-new-years-2013/">Reader
                Submissions -<br>
                New Year's 2013</a>
              </li>
              <li>
                <a href="/addressbookui/">AddressBookUI</a>
              </li>
            </ul>
          </div>
        </section>
      </footer>
    </div><script type="text/javascript">
var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
    </script><script type="text/javascript">
var _gauges = _gauges || [];
    (function() {
      var t   = document.createElement('script');
      t.type  = 'text/javascript';
      t.async = true;
      t.id    = 'gauges-tracker';
      t.setAttribute('data-site-id', '510be6d4108d7b438800005f');
      t.src = '//secure.gaug.es/track.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(t, s);
    })();
    </script>
  </body>
</html>
